box: wercker/nodejs
# Build definition
build:
    # The steps that will be executed on build
    steps:
        # A step that executes `npm install` command
        - npm-install
        # A step that executes `npm test` command
        - npm-test

        - install-packages:
            packages: zip

        - script:
            name: build
            code: |
                make dist
                mv build/Framer.zip $WERCKER_OUTPUT_DIR
deploy:
    steps:
        - script:
            name: retrieve git tag
            code: export RETRIEVED_GIT_TAG="v5.0.0"
        - github-create-release:
            token: $GITHUB_TOKEN
            tag_name: $RETRIEVED_GIT_TAG
        - github-upload-asset:
            token: $GITHUB_TOKEN
            file: Framer.zip
